---

---

<section class="hero-section">
  <canvas id="hero"></canvas>
  <h1 class="title">AirPods Pro</h1>
</section>

<script>
  import gsap from "gsap";
  import { ScrollTrigger } from "gsap/ScrollTrigger";

  gsap.registerPlugin(ScrollTrigger);

  // Animaciones de entrada al cargar la pÃ¡gina
  gsap.fromTo(
    ".title",
    { opacity: 0, scale: 0.7 },
    {
      opacity: 1,
      scale: 1,
      duration: 1,
      ease: "back.out(1.7)",
    }
  );

  gsap.fromTo(
    "canvas",
    { opacity: 0, scale: 0.9 },
    { opacity: 1, scale: 1, duration: 1.2, ease: "back.inOut", delay: 0.5 }
  );

  // Animaciones de scroll - immediateRender evita la interferencia
  gsap.to(".title", {
    scale: 1.1,
    autoAlpha: 0,
    immediateRender: false,
    scrollTrigger: {
      scrub: 0.5,
      start: "center center",
    },
  });

  const canvas = document.getElementById("hero");
  const ctx = canvas.getContext("2d");

  canvas.width = 1068;
  canvas.height = 600;

  const TOTAL_FRAMES = 65;

  const images = Array.from({ length: TOTAL_FRAMES }, (_, i) => {
    const img = new Image();
    img.src = `/images/${String(i).padStart(4, "0")}.png`;
    return img;
  });

  const airpods = {
    frame: 0,
  };

  gsap.to(airpods, {
    frame: TOTAL_FRAMES - 1,
    ease: "none",
    snap: "frame",
    scrollTrigger: {
      scrub: 0.5,
    },
    onUpdate: render,
  });

  images[0].onload = () => render();

  function render() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    ctx.drawImage(images[airpods.frame], 0, 0);
  }
</script>

<style>
  .hero-section {
    position: relative;
    width: 100%;
    height: 100vh;
  }

  h1 {
    position: fixed;
    left: 50%;
    top: 35%;
    transform: translate(-50%, -50%);
    font-size: 12vw;
    text-align: center;
    width: 100%;
  }

  canvas {
    position: fixed;
    top: 40%;
    left: 50%;
    transform: translate(-50%, -50%);
    aspect-ratio: 1068/600;
    width: 100%;
    height: 100vh;
    object-fit: contain;
    z-index: 10;
  }
</style>
